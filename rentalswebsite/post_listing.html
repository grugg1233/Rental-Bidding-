<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a New Listing</title>
    <link rel="stylesheet" href="corporate_style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
        <div class="container-fluid">
            <a href="/" class="navbar-brand">Rental Bidding Platform</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/create-listing">Create Listing</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/contact">Contact Us</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Create Listing Form -->
    <div class="container my-5">
        <h2 class="text-center mb-4">Create a New Listing</h2>
        <form class="listing-form" id="listing-form">
            <label for="propertyName">Property Name</label>
            <input type="text" id="propertyName" name="propertyName" placeholder="Enter property name" required>
        
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="3" placeholder="Enter property description" required></textarea>
        
            <label for="startingBid">Starting Bid</label>
            <input type="number" id="startingBid" name="startingBid" placeholder="Enter starting bid" required>
        
            <label for="imgUrl">Image URL</label>
            <input type="url" id="imgUrl" name="imgUrl" placeholder="Enter image URL" required>
        
            <label for="streetAddress">Street Address</label>
            <input type="text" id="streetAddress" name="streetAddress" placeholder="Enter street address" required>
        
            <label for="city">City</label>
            <input type="text" id="city" name="city" placeholder="Enter city" required>
        
            <label for="state">State/Province</label>
            <input type="text" id="state" name="state" placeholder="Enter state or province" required>
        
            <label for="postalCode">Postal Code</label>
            <input type="text" id="postalCode" name="postalCode" placeholder="Enter postal code" required>
        
            <button type="submit">Create Listing</button>
        </form>
        
    </div>

    <footer>
        <p>&copy; 2024 Rental Bidding Platform. All Rights Reserved.</p>
    </footer>

    <script>
        // JavaScript to handle form submission
        document.getElementById('listing-form').addEventListener('submit', function (event) {
            event.preventDefault();

            // Get form data
            const propertyName = document.getElementById('propertyName').value;
            const description = document.getElementById('description').value;
            const startingBid = parseFloat(document.getElementById('startingBid').value);
            const imgUrl = document.getElementById('imgUrl').value;
            const streetAddress = document.getElementById('streetAddress').value;
            const city = document.getElementById('city').value;
            const state = document.getElementById('state').value;
            const postalCode = document.getElementById('postalCode').value;

            // Create listing data object
            const listingData = {
                propertyName,
                description,
                startingBid,
                imgUrl,
                streetAddress,
                city,
                state,
                postalCode,
                currentBid: startingBid
            };

            // Send data to WebSocket server
            const socket = new WebSocket('ws://localhost:8080');
            socket.onopen = () => {
                socket.send(JSON.stringify({
                    type: 'newListing',
                    listing: listingData
                }));
                alert('Listing created successfully!');
                // Redirect to home page after successful submission
                window.location.href = '/';
            };

            socket.onerror = (error) => {
                console.error('WebSocket error:', error);
                alert('Failed to create listing. Please try again later.');
            };
        });
    </script>
</body>
</html>
